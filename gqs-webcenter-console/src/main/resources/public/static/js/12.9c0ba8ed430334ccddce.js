webpackJsonp([12],{"9ktZ":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,s=r(a("a3Yh")),n=r(a("oquq"));a("0xDb");function r(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{applicationName:"",value:"",dataList:[],sysCodeList:[],dataListLoading:!1,addOrUpdateVisible:!1,current:1,size:10,totalPage:0}},components:{AddOrUpdate:n.default},activated:function(){this.getSysCode()},methods:(i={refreshList:function(t){this.value=t.id,this.applicationName=t.applicationName,this.getDataList()},getSysCode:function(){var t=this;this.$http({url:this.$http.adornUrl("/sys/code/queryAll"),method:"get"}).then(function(e){var a=e.data;t.sysCodeList=a.data,t.value=t.sysCodeList[0].id,t.applicationName=t.sysCodeList[0].applicationName,t.getDataList()})},permissions:function(t,e){var a=this,i="anon",s=t.digest;2===e&&(i="authc"),3===e&&(i="perms["+s+"]"),this.$http({url:this.$http.adornUrl("/sys/rest/update"),method:"post",data:this.$http.adornData({digest:s,permissions:i})}).then(function(t){var e=t.data;e&&0===e.code?a.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){a.getDataList()}}):a.$message.error(e.msg)})}},(0,s.default)(i,"refreshList",function(t){this.value=t.id,this.applicationName=t.applicationName,this.getDataList()}),(0,s.default)(i,"sizeChangeHandle",function(t){this.size=t,this.current=1,this.getDataList()}),(0,s.default)(i,"currentChangeHandle",function(t){this.current=t,this.getDataList()}),(0,s.default)(i,"getDataList",function(){var t=this;this.dataListLoading=!0,this.$http({url:this.$http.adornUrl("/sys/rest/list"),method:"post",data:this.$http.adornData({size:this.size,current:this.current,params:this.applicationName})}).then(function(e){var a=e.data;t.dataList=a.restList.records,t.totalPage=a.restList.total,t.dataListLoading=!1})}),i)}},"HjQ+":function(t,e,a){"use strict";var i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mod-menu"},[a("el-form",{attrs:{inline:!0}},[[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.sysCodeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id},nativeOn:{click:function(a){return t.refreshList(e)}}})}),1)]],2),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.dataList,"row-key":"menuId",border:""}},[a("el-table-column",{attrs:{prop:"apiName","header-align":"center","min-width":"150",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"applicationName","header-align":"center","min-width":"150",label:"应用名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"url","header-align":"center","min-width":"200",label:"URL"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime","header-align":"center","min-width":"150",align:"center",label:"创建时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"permissions","header-align":"center",align:"center",width:"150","show-overflow-tooltip":!0,label:"权限"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-dropdown",[a("span",{staticClass:"el-dropdown-link"},["anon"===e.row.permissions?a("el-tag",{attrs:{size:"small",type:"success"}},[t._v("公开")]):"authc"===e.row.permissions?a("el-tag",{attrs:{size:"small"}},[t._v("登录")]):e.row.permissions.startsWith("per")?a("el-tag",{attrs:{size:"small",type:"warning"}},[t._v("权限")]):t._e(),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})],1),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(a){return t.permissions(e.row,1)}}},[t._v("公开")]),t._v(" "),a("el-dropdown-item",{nativeOn:{click:function(a){return t.permissions(e.row,2)}}},[t._v("登录")]),t._v(" "),a("el-dropdown-item",{nativeOn:{click:function(a){return t.permissions(e.row,3)}}},[t._v("权限")])],1)],1)]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.current,"page-sizes":[10,20,50,100],"page-size":t.size,total:t.totalPage,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.sizeChangeHandle,"current-change":t.currentChangeHandle}})],1)},staticRenderFns:[]};e.a=i},gE78:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("9ktZ"),s=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);var r=a("HjQ+"),o=a("C7Lr")(s.a,r.a,!1,null,null,null);e.default=o.exports}});
//# sourceMappingURL=12.9c0ba8ed430334ccddce.js.map